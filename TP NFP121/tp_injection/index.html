<html>
<head>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
    <title>NFP121 - TP7</title>
    <style type="text/css">
        body {
            background: #E5DED6;
            background-color: #fff;
            color: #333333;
            font-size: 14px;
            font-family: Verdana, Arial;
        }

        table {
            font-size: 20px;
            border-color: #808080;
            border-style: solid;
            border-width: 1px;
        }

        h2 {
            color: #C1002A;
            font-family: Verdana, Arial;
            font-size: 30px;
            font-weight: bold;
        }

        h3 {
            color: #C1002A;
            font-family: Verdana, Arial;
            font-size: 20px;
            font-weight: bold;
        }
        
        hr {
            margin: 15px 0 15px 0;
        }
    </style>

</head>
<body>
    <h2 style="text-align: center">NFP 121 - TP_injection</h2>
    <h2 style="text-align: center">Injection de d�pendances, Inversion de 
    contr�le</h2>
    <br />
    <hr>
    <br />
    <table>
        <tr>
            <td>ABOUZEID
            </td>
            <td>...
            </td>
        </tr>
        <tr>
            <td>Benoit
            </td>
            <td>...
            </td>
        </tr>
        <tr>
            <td>0g5drrefx11
            </td>
            <td>...
            </td>
        </tr>
    </table>
    <br />
    <hr />
    <h3>Question 1 :</h3>
    <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Exemple d'utilisation de l'injection de dépendance avec une concession possédant un parc.
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> Concession <span style='font-weight:bold;color:#D3171B'>{</span>

	<span style='font-weight:bold;color:#7B0052;'>private</span> List&lt;Voiture&gt; voitures;
	
	<span style='font-weight:bold;color:#7B0052;'>private</span> String name;

	<span style='font-weight:bold;color:#7B0052;'>public</span> List&lt;Voiture&gt; getVoitures() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> voitures;
	<span style='font-weight:bold;color:#D3171B'>}</span>
	
	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setAutomobile(Voiture voiture) <span style='font-weight:bold;color:#D3171B'>{</span>
		voitures.add(voiture);
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setVoitures(List&lt;Voiture&gt; voitures) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.voitures = voitures;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> String getName() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> name;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setName(String name) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.name = name;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> Voiture <span style='font-weight:bold;color:#D3171B'>{</span>
	
	<span style='font-weight:bold;color:#7B0052;'>private</span> String marque;
	
	<span style='font-weight:bold;color:#7B0052;'>private</span> String modele;
	
	<span style='font-weight:bold;color:#7B0052;'>private</span> <span style='font-weight:bold;color:#7B0052;'>int</span> puissance;

	<span style='font-weight:bold;color:#7B0052;'>public</span> String getMarque() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> marque;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setMarque(String marque) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.marque = marque;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> String getModele() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> modele;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setModele(String modele) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.modele = modele;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>int</span> getPuissance() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> puissance;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setPuissance(<span style='font-weight:bold;color:#7B0052;'>int</span> puissance) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.puissance = puissance;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'>bean.id.1=concession
concession.class=question1.Concession
concession.property.1=name
concession.property.1.param.1=ma concession
concession.property.2=voitures
concession.property.2.param.1=voitures
concession.property.3=automobile
concession.property.3.param.1=voiture

bean.id.2=voiture
voiture.class=question1.Voiture
voiture.property.1=marque
voiture.property.1.param.1=mercedes
voiture.property.2=modele
voiture.property.2.param.1=c63
voiture.property.3=puissance
voiture.property.3.param.1=500

bean.id.3=voitures
voitures.class=java.util.ArrayList</pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> ConcessionTest <span style='font-weight:bold;color:#7B0052;'>extends</span> junit.framework.TestCase <span style='font-weight:bold;color:#D3171B'>{</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> testAvecInjection() <span style='font-weight:bold;color:#7B0052;'>throws</span> Exception <span style='font-weight:bold;color:#D3171B'>{</span>
		ApplicationContext ctx = container.Factory.createApplicationContext(<span style='color:#2A00FF'>"./question1/ConcessionConfig.txt"</span>);
		Concession concession = ctx.getBean(<span style='color:#2A00FF'>"concession"</span>);

		List&lt;Voiture&gt; voitures = concession.getVoitures();

		Voiture voiture = voitures.get(0);
		assertEquals(<span style='color:#2A00FF'>"mercedes"</span>, voiture.getMarque());

	<span style='font-weight:bold;color:#D3171B'>}</span>
<span style='font-weight:bold;color:#D3171B'>}</span></pre>

    <hr />
    <h3>Question 2.1 :</h3>
    <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Exemple du patron strategy avec un étudiant qui dispose de plusieurs strategies pour reviser ses examens
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> Etudiant <span style='font-weight:bold;color:#D3171B'>{</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> String nom;

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>int</span> resultat;

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setStrategie(Strategy strategie) <span style='font-weight:bold;color:#D3171B'>{</span>

		this.resultat = strategie.reviser();

	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> String getNom() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> nom;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setNom(String nom) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.nom = nom;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>int</span> getResultat() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> resultat;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setResultat(<span style='font-weight:bold;color:#7B0052;'>int</span> resultat) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.resultat = resultat;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Interface Strategy que toutes les strategies concrètes devront implémenter
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>interface</span> Strategy <span style='font-weight:bold;color:#D3171B'>{</span>
	
	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>int</span> reviser();

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Strategie de l'étudiant assidu
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> AuFurEtAMesure <span style='font-weight:bold;color:#7B0052;'>implements</span> Strategy <span style='font-weight:bold;color:#D3171B'>{</span>

	@Override
	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>int</span> reviser() <span style='font-weight:bold;color:#D3171B'>{</span>

		<span style='font-weight:bold;color:#7B0052;'>return</span> 20;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Strategie de l'etudiant peu engagé
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> DerniereMinute <span style='font-weight:bold;color:#7B0052;'>implements</span> Strategy <span style='font-weight:bold;color:#D3171B'>{</span>

	@Override
	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>int</span> reviser() <span style='font-weight:bold;color:#D3171B'>{</span>		
		<span style='font-weight:bold;color:#7B0052;'>return</span> 0;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'>bean.id.1=etudiantStudieux
etudiantStudieux.class=question2.Etudiant
etudiantStudieux.property.1=nom
etudiantStudieux.property.1.param.1=Jean
etudiantStudieux.property.2=strategie
etudiantStudieux.property.2.param.1=strategieStudieuse

bean.id.2=strategieStudieuse
strategieStudieuse.class=question2.AuFurEtAMesure</pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> StrategyTest <span style='font-weight:bold;color:#7B0052;'>extends</span> junit.framework.TestCase <span style='font-weight:bold;color:#D3171B'>{</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> testAvecInjection() <span style='font-weight:bold;color:#7B0052;'>throws</span> Exception <span style='font-weight:bold;color:#D3171B'>{</span>
		ApplicationContext ctx = container.Factory.createApplicationContext(<span style='color:#2A00FF'>"./question2/StrategyConfig.txt"</span>);
		Etudiant etudiant = ctx.getBean(<span style='color:#2A00FF'>"etudiantStudieux"</span>);

		assertEquals(20, etudiant.getResultat());

	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>

    <hr />
    <h3>Question 2.2 :</h3>
   <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Exemple du patron publish/suscribe (variante car pas de topic sur lequel sosuscrire)
 * 
 * Basé sur un modèle client/serveur simplifié
 * 
 * Un serveur reçoit les requêtes d'un client X et notifie un autre client Y
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> Serveur <span style='font-weight:bold;color:#D3171B'>{</span>

	Queue&lt;Message&gt; file = <span style='font-weight:bold;color:#7B0052;'>new</span> LinkedList&lt;Message&gt;();

	List&lt;ClientRecepteur&gt; recepteurs = <span style='font-weight:bold;color:#7B0052;'>new</span> ArrayList&lt;&gt;();

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> broadcast() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>if</span> (file.isEmpty()) <span style='font-weight:bold;color:#D3171B'>{</span>
			System.out.println(<span style='color:#2A00FF'>"No messages from publishers to display"</span>);
		<span style='font-weight:bold;color:#D3171B'>}</span> <span style='font-weight:bold;color:#7B0052;'>else</span> <span style='font-weight:bold;color:#D3171B'>{</span>
			<span style='font-weight:bold;color:#7B0052;'>while</span> (!file.isEmpty()) <span style='font-weight:bold;color:#D3171B'>{</span>
				Message message = file.remove();

				<span style='font-weight:bold;color:#7B0052;'>for</span> (ClientRecepteur recepteur : recepteurs) <span style='font-weight:bold;color:#D3171B'>{</span>

					recepteur.setMessage(message);
				<span style='font-weight:bold;color:#D3171B'>}</span>
			<span style='font-weight:bold;color:#D3171B'>}</span>
		<span style='font-weight:bold;color:#D3171B'>}</span>
	<span style='font-weight:bold;color:#D3171B'>}</span>
	
	<span style='font-weight:bold;color:#7B0052;'>public</span> Queue&lt;Message&gt; getFile() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> file;
	<span style='font-weight:bold;color:#D3171B'>}</span>


	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setFile(Queue&lt;Message&gt; file) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.file = file;
	<span style='font-weight:bold;color:#D3171B'>}</span>


	<span style='font-weight:bold;color:#7B0052;'>public</span> List&lt;ClientRecepteur&gt; getRecepteurs() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> recepteurs;
	<span style='font-weight:bold;color:#D3171B'>}</span>


	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setRecepteurs(List&lt;ClientRecepteur&gt; recepteurs) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.recepteurs = recepteurs;
	<span style='font-weight:bold;color:#D3171B'>}</span>


	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setMessage(Message message) <span style='font-weight:bold;color:#D3171B'>{</span>
		file.add(message);
	<span style='font-weight:bold;color:#D3171B'>}</span>

	
	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setRecepteur(ClientRecepteur recepteur) <span style='font-weight:bold;color:#D3171B'>{</span>
		recepteurs.add(recepteur);
	<span style='font-weight:bold;color:#D3171B'>}</span>
<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Client qui envoie une requête (Publisher)
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> ClientEmetteur <span style='font-weight:bold;color:#D3171B'>{</span>

	<span style='font-weight:bold;color:#7B0052;'>private</span> Message message;

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setPublication(Serveur serveur) <span style='font-weight:bold;color:#D3171B'>{</span>
		serveur.setMessage(message);

	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> Message getMessage() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> message;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setMessage(Message message) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.message = message;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Client qui reçoit une requête (suscriber)
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> ClientRecepteur <span style='font-weight:bold;color:#D3171B'>{</span>

	<span style='font-weight:bold;color:#7B0052;'>private</span> Message message;

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setRecepteur(Serveur serveur) <span style='font-weight:bold;color:#D3171B'>{</span>
		serveur.setRecepteur(<span style='font-weight:bold;color:#7B0052;'>this</span>);
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> Message getMessage() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> message;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setMessage(Message message) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.message = message;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Body de la requête
 * 
 * @author benoit
 *
 */</span>
<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> Message <span style='font-weight:bold;color:#D3171B'>{</span>
	
	<span style='font-weight:bold;color:#7B0052;'>private</span> String payload;

	<span style='font-weight:bold;color:#7B0052;'>public</span> String getPayload() <span style='font-weight:bold;color:#D3171B'>{</span>
		<span style='font-weight:bold;color:#7B0052;'>return</span> payload;
	<span style='font-weight:bold;color:#D3171B'>}</span>

	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> setPayload(String payload) <span style='font-weight:bold;color:#D3171B'>{</span>
		this.payload = payload;
	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'>bean.id.1=serveur
serveur.class=question2.Serveur
serveur.property.1=message
serveur.property.1.param.1=message
serveur.property.2=recepteur
serveur.property.2.param.1=recepteur

bean.id.2=message
message.class=question2.Message
message.property.1=payload
message.property.1.param.1=un message à transmettre

bean.id.3=emetteur
emetteur.class=question2.ClientEmetteur
emetteur.property.1=message
emetteur.property.1.param.1=message
emetteur.property.2=publication
emetteur.property.2.param.1=serveur

bean.id.4=recepteur
recepteur.class=question2.ClientRecepteur
recepteur.property.1=recepteur
recepteur.property.1.param.1=serveur</pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>class</span> PubSubTest <span style='font-weight:bold;color:#7B0052;'>extends</span> junit.framework.TestCase<span style='font-weight:bold;color:#D3171B'>{</span>
	
	<span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> testAvecInjection() <span style='font-weight:bold;color:#7B0052;'>throws</span> Exception <span style='font-weight:bold;color:#D3171B'>{</span>
		ApplicationContext ctx = container.Factory.createApplicationContext(<span style='color:#2A00FF'>"./question2/PubSubConfig.txt"</span>);		
		Serveur serveur = ctx.getBean(<span style='color:#2A00FF'>"serveur"</span>);
		
		serveur.broadcast();
		
		List&lt;ClientRecepteur&gt; recepteurs = serveur.getRecepteurs();
		
		ClientRecepteur recepteur = recepteurs.get(0);

		assertEquals(<span style='color:#2A00FF'>"un message à transmettre"</span>, recepteur.getMessage().getPayload());

	<span style='font-weight:bold;color:#D3171B'>}</span>

<span style='font-weight:bold;color:#D3171B'>}</span></pre>

    <hr />
    <h3>Question 3 :</h3>
   <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'>bean.id.1=serviceLocator
serviceLocator.class=service_locator.ServiceLocator
serviceLocator.property.1=container
serviceLocator.property.1.param.1=strategy
serviceLocator.property.2=container
serviceLocator.property.2.param.1=pubsub

bean.id.2=strategy
strategy.class=container.FileSystemPropsApplicationContext
strategy.property.1=fileName
strategy.property.1.param.1=./question2/StrategyConfig.txt



bean.id.3=pubsub
pubsub.class=container.FileSystemPropsApplicationContext
pubsub.property.1=fileName
pubsub.property.1.param.1=./question2/PubSubConfig.txt</pre>
<pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>void</span> testServiceLocator3() <span style='font-weight:bold;color:#7B0052;'>throws</span> Exception <span style='font-weight:bold;color:#D3171B'>{</span>
		ApplicationContext ctx = Factory.createApplicationContext(<span style='color:#2A00FF'>"./question3/README.TXT"</span>);
		ServiceLocatorI serviceLocator = ctx.getBean(<span style='color:#2A00FF'>"serviceLocator"</span>);

		Etudiant etudiant = serviceLocator.lookup(<span style='color:#2A00FF'>"etudiantStudieux"</span>);

		assertEquals(20, etudiant.getResultat());

		Serveur serveur = serviceLocator.lookup(<span style='color:#2A00FF'>"serveur"</span>);

		serveur.broadcast();

		List&lt;ClientRecepteur&gt; recepteurs = serveur.getRecepteurs();

		ClientRecepteur recepteur = recepteurs.get(0);

		assertEquals(<span style='color:#2A00FF'>"un message à transmettre"</span>, recepteur.getMessage());

	<span style='font-weight:bold;color:#D3171B'>}</span></pre>

    <hr />

        <h3>Conclusion, biliographie et remarques :</h3>
        <i style="font-size:12px;">... Une seule page html, limitez le nombre de clics, (plus de 200 rapports � corriger chaque semaine)</i>
        <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:'Courier New', Courier, monospace; overflow: auto;'><span style='color:#3F5FBF'>/**
 * Mise en oeuvre de l'injection de dépendance à un degré supérieur; celui des patrons!
 * 
 * Applicable à tous les patrons introduisant de la variabilité dans leur structure par l'utilisation de la délégation
 * 
 * Séparation configuration/utilisation
 * 
 * Injection de dépendance + patron = utile? facilite la maintenance? flexibilité? A voir...
 * 
 * Utilisation du patron service locator ou les conteneur de beans sont des beans (conteneur de conteneurs)
 * 
 * Abstraction de la recherche d'un service pour un utilisateur (lookup(serviceName) et c'est tout)
 * 
 * @author benoit
 *
 */</span></pre>
</body>
</html>